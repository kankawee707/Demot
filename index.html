<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Probability Monopoly Quest</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;500&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #2c3e50; --success: #27ae60; --danger: #e74c3c; --warning: #f1c40f; --dark: #1a252f; }
        body { font-family: 'Kanit', sans-serif; background: var(--dark); margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; color: #333; }
        
        #game-card { background: white; width: 92%; max-width: 480px; padding: 25px; border-radius: 25px; box-shadow: 0 15px 35px rgba(0,0,0,0.5); text-align: center; position: relative; }
        
        .header-info { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
        .money-badge { background: var(--warning); padding: 5px 15px; border-radius: 20px; font-weight: bold; font-size: 1.2rem; box-shadow: 0 4px 0 #d4ac0d; }
        .q-counter { font-size: 0.9rem; color: #7f8c8d; }

        #q-text { font-size: 1.15rem; margin-bottom: 20px; min-height: 60px; line-height: 1.5; color: var(--primary); font-weight: 500; }
        
        .option-btn { display: block; width: 100%; padding: 12px; margin: 8px 0; border: 2px solid #eee; border-radius: 12px; background: white; cursor: pointer; transition: 0.2s; font-family: 'Kanit'; font-size: 1rem; }
        .option-btn:hover { border-color: var(--primary); background: #f9f9f9; transform: translateY(-2px); }

        .end-game-btn { background: none; border: none; color: #e74c3c; text-decoration: underline; cursor: pointer; font-size: 0.85rem; margin-top: 15px; font-family: 'Kanit'; opacity: 0.7; }
        .end-game-btn:hover { opacity: 1; }

        /* Overlay & Explanation */
        #overlay { display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.98); border-radius: 25px; justify-content: center; align-items: center; flex-direction: column; z-index: 10; padding: 20px; box-sizing: border-box; }
        .explanation-box { background: #fdf2f2; border-left: 5px solid var(--danger); padding: 15px; margin: 15px 0; border-radius: 8px; text-align: left; font-size: 0.9rem; }
        .next-btn { background: var(--primary); color: white; border: none; padding: 12px 35px; border-radius: 10px; cursor: pointer; font-size: 1.1rem; font-family: 'Kanit'; }

        /* Result Screen */
        #result-screen { display: none; }
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 20px 0; }
        .stat-item { padding: 15px; border-radius: 15px; background: #f8f9fa; }
    </style>
</head>
<body>

<div id="game-card">
    <div id="quiz-screen">
        <div class="header-info">
            <span class="q-counter">‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà: <span id="current-num">1</span>/40</span>
            <div class="money-badge">üí∞ <span id="balance">0</span></div>
        </div>
        <small id="q-category" style="color:#95a5a6; display:block; margin-bottom:5px;"></small>
        <div id="q-text">‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö...</div>
        <div id="options-container"></div>
        <button class="end-game-btn" onclick="finishGame()">‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏´‡∏¢‡∏∏‡∏î‡πÅ‡∏•‡∏∞‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ</button>
    </div>

    <div id="overlay">
        <h1 id="status-icon" style="font-size:3.5rem; margin:0;"></h1>
        <h2 id="status-title" style="margin:5px 0;"></h2>
        <div id="status-desc"></div>
        <div id="explanation-area" class="explanation-box" style="display:none;">
            <strong>üí° ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÇ‡∏à‡∏ó‡∏¢‡πå:</strong> <span id="q-explanation"></span>
        </div>
        <button id="main-action-btn" class="next-btn" onclick="nextQuestion()">‡πÑ‡∏õ‡∏ï‡πà‡∏≠ ‚ûî</button>
    </div>

    <div id="result-screen">
        <h1 style="margin:0;">üèÅ ‡∏à‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏´‡∏°‡∏≤‡∏Å</h1>
        <div class="stat-grid">
            <div class="stat-item">
                <small>‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏•‡∏£‡∏ß‡∏°</small>
                <div style="font-size:1.5rem; color:var(--success); font-weight:bold;"><span id="final-money">0</span> ‡∏ø</div>
            </div>
            <div class="stat-item">
                <small>‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</small>
                <div style="font-size:1.5rem; font-weight:bold;"><span id="final-correct">0</span> ‡∏Ç‡πâ‡∏≠</div>
            </div>
        </div>
        <p id="rank-msg" style="color:#7f8c8d;"></p>
        <button class="next-btn" style="background:var(--success)" onclick="location.reload()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÉ‡∏´‡∏°‡πà</button>
    </div>
</div>

<script>
    // ‡∏Ñ‡∏•‡∏±‡∏á‡πÇ‡∏à‡∏ó‡∏¢‡πå 40 ‡∏Ç‡πâ‡∏≠ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏â‡∏•‡∏¢‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢
    const questionsPool = [
        {q: "‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô 8 ‡πÅ‡∏õ‡∏•‡∏á ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ã‡∏∑‡πâ‡∏≠ 3 ‡πÅ‡∏õ‡∏•‡∏á‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô ‡∏à‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏Å‡∏µ‡πà‡∏ß‡∏¥‡∏ò‡∏µ?", a: ["56 ‡∏ß‡∏¥‡∏ò‡∏µ", "336 ‡∏ß‡∏¥‡∏ò‡∏µ", "24 ‡∏ß‡∏¥‡∏ò‡∏µ"], c: 0, r: 50, t: "‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏´‡∏°‡∏π‡πà", msg: "‡πÉ‡∏ä‡πâ‡∏™‡∏π‡∏ï‡∏£ C(8,3) = (8x7x6)/(3x2x1) = 56 ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏™‡∏ô‡∏•‡∏≥‡∏î‡∏±‡∏ö"},
        {q: "‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô 6 ‡∏Ñ‡∏ô ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ò‡∏≤‡∏ô ‡∏à‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏Å‡∏µ‡πà‡∏ß‡∏¥‡∏ò‡∏µ?", a: ["15 ‡∏ß‡∏¥‡∏ò‡∏µ", "30 ‡∏ß‡∏¥‡∏ò‡∏µ", "36 ‡∏ß‡∏¥‡∏ò‡∏µ"], c: 1, r: 50, t: "‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏™‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô", msg: "‡πÉ‡∏ä‡πâ P(6,2) = 6x5 = 30 ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏à‡∏∂‡∏á‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç"},
        {q: "‡∏ó‡∏≠‡∏¢‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤ 2 ‡∏•‡∏π‡∏Å ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏ï‡πâ‡∏°‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô 7?", a: ["1/6", "1/12", "1/36"], c: 0, r: 50, t: "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô", msg: "‡∏ú‡∏•‡∏£‡∏ß‡∏° 7 ‡∏°‡∏µ 6 ‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏∑‡∏≠ (1,6),(6,1),(2,5),(5,2),(3,4),(4,3) ‡∏à‡∏≤‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 36 ‡πÅ‡∏ö‡∏ö"},
        {q: "‡∏™‡∏•‡∏±‡∏ö‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ 'LUCKY' ‡πÑ‡∏î‡πâ‡∏Å‡∏µ‡πà‡∏ß‡∏¥‡∏ò‡∏µ?", a: ["60 ‡∏ß‡∏¥‡∏ò‡∏µ", "120 ‡∏ß‡∏¥‡∏ò‡∏µ", "24 ‡∏ß‡∏¥‡∏ò‡∏µ"], c: 1, r: 50, t: "‡πÅ‡∏ü‡∏Å‡∏ó‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏•", msg: "‡∏°‡∏µ‡∏≠‡∏±‡∏Å‡∏©‡∏£ 5 ‡∏ï‡∏±‡∏ß‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏´‡∏°‡∏î ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏™‡∏•‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏î‡πâ 5! = 120"},
        {q: "‡∏´‡∏¢‡∏¥‡∏ö‡πÑ‡∏û‡πà 1 ‡πÉ‡∏ö ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡πÅ‡∏ï‡πâ‡∏° 'A'?", a: ["1/52", "4/52", "13/52"], c: 1, r: 50, t: "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô", msg: "‡πÑ‡∏û‡πà‡∏™‡∏≥‡∏£‡∏±‡∏ö‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏°‡∏µ A ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 4 ‡πÉ‡∏ö (4 ‡∏î‡∏≠‡∏Å) ‡∏à‡∏≤‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 52 ‡πÉ‡∏ö"},
        {q: "‡∏à‡∏±‡∏î‡∏Ñ‡∏ô 5 ‡∏Ñ‡∏ô‡∏ô‡∏±‡πà‡∏á‡∏•‡πâ‡∏≠‡∏°‡∏ß‡∏á‡∏Å‡∏•‡∏° ‡πÑ‡∏î‡πâ‡∏Å‡∏µ‡πà‡∏ß‡∏¥‡∏ò‡∏µ?", a: ["120 ‡∏ß‡∏¥‡∏ò‡∏µ", "24 ‡∏ß‡∏¥‡∏ò‡∏µ", "60 ‡∏ß‡∏¥‡∏ò‡∏µ"], c: 1, r: 100, t: "‡∏ß‡∏á‡∏Å‡∏•‡∏°", msg: "‡∏™‡∏π‡∏ï‡∏£‡∏ß‡∏á‡∏Å‡∏•‡∏° (n-1)! ‡∏à‡∏∞‡πÑ‡∏î‡πâ (5-1)! = 4! = 24 ‡∏ß‡∏¥‡∏ò‡∏µ"},
        {q: "‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ 'MOON' ‡∏™‡∏•‡∏±‡∏ö‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÑ‡∏î‡πâ‡∏Å‡∏µ‡πà‡∏ß‡∏¥‡∏ò‡∏µ?", a: ["24 ‡∏ß‡∏¥‡∏ò‡∏µ", "12 ‡∏ß‡∏¥‡∏ò‡∏µ", "6 ‡∏ß‡∏¥‡∏ò‡∏µ"], c: 1, r: 100, t: "‡∏Ç‡∏≠‡∏á‡∏ã‡πâ‡∏≥", msg: "‡∏°‡∏µ‡∏≠‡∏±‡∏Å‡∏©‡∏£ 4 ‡∏ï‡∏±‡∏ß ‡∏ã‡πâ‡∏≥ 2 ‡∏ï‡∏±‡∏ß (O) ‡∏à‡∏∞‡πÑ‡∏î‡πâ 4!/2! = 12 ‡∏ß‡∏¥‡∏ò‡∏µ"},
        {q: "‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á 2 ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å 5 ‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡πÑ‡∏î‡πâ‡∏Å‡∏µ‡πà‡∏ß‡∏¥‡∏ò‡∏µ?", a: ["10 ‡∏ß‡∏¥‡∏ò‡∏µ", "20 ‡∏ß‡∏¥‡∏ò‡∏µ", "25 ‡∏ß‡∏¥‡∏ò‡∏µ"], c: 0, r: 50, t: "‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏´‡∏°‡∏π‡πà", msg: "‡πÉ‡∏ä‡πâ C(5,2) = (5x4)/2 = 10 ‡∏ß‡∏¥‡∏ò‡∏µ"},
        {q: "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏π‡∏Å‡πÄ‡∏ï‡πã‡∏≤ 1 ‡∏•‡∏π‡∏Å‡∏à‡∏∞‡∏≠‡∏≠‡∏Å‡πÅ‡∏ï‡πâ‡∏°‡∏Ñ‡∏π‡πà?", a: ["1/2", "1/3", "1/6"], c: 0, r: 50, t: "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô", msg: "‡πÅ‡∏ï‡πâ‡∏°‡∏Ñ‡∏π‡πà‡∏Ñ‡∏∑‡∏≠ {2, 4, 6} ‡∏°‡∏µ 3 ‡πÅ‡∏ö‡∏ö ‡∏à‡∏≤‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 6 ‡πÅ‡∏ö‡∏ö"},
        {q: "‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏•‡∏Ç 2 ‡∏´‡∏•‡∏±‡∏Å‡∏à‡∏≤‡∏Å {1,2,3} ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥‡πÄ‡∏•‡∏Ç‡πÑ‡∏î‡πâ‡∏Å‡∏µ‡πà‡∏à‡∏≥‡∏ô‡∏ß‡∏ô?", a: ["3", "6", "9"], c: 1, r: 50, t: "‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏™‡∏±‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô", msg: "‡∏´‡∏•‡∏±‡∏Å‡πÅ‡∏£‡∏Å‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ 3 ‡∏´‡∏•‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏≠‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ 2 (‡∏´‡πâ‡∏≤‡∏°‡∏ã‡πâ‡∏≥) = 3x2 = 6"},
        // (‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö 40 ‡∏Ç‡πâ‡∏≠‡πÉ‡∏ô‡∏ä‡∏∏‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô)
    ];

    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏™‡∏°‡∏°‡∏ï‡∏¥‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö 40 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö (‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏à‡∏£‡∏¥‡∏á‡πÑ‡∏î‡πâ)
    for(let i=11; i<=40; i++) {
        questionsPool.push({
            q: `‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà ${i}: ‡∏™‡∏∏‡πà‡∏°‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡πÉ‡∏ô‡πÄ‡∏Å‡∏°‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏µ...`,
            a: ["‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á", "‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏´‡∏•‡∏≠‡∏Å 1", "‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡∏´‡∏•‡∏≠‡∏Å 2"],
            c: 0, r: i > 30 ? 100 : 50, t: "‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ", msg: "‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô"
        });
    }

    let currentIdx = 0;
    let totalMoney = 0;
    let correctCount = 0;
    let shuffledQuestions = [];

    function initGame() {
        // Shuffle ‡∏≠‡∏±‡∏•‡∏Å‡∏≠‡∏£‡∏¥‡∏ó‡∏∂‡∏° Fisher-Yates ‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡πÑ‡∏î‡πâ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô
        shuffledQuestions = [...questionsPool];
        for (let i = shuffledQuestions.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [shuffledQuestions[i], shuffledQuestions[j]] = [shuffledQuestions[j], shuffledQuestions[i]];
        }
        showQuestion();
    }

    function showQuestion() {
        const qData = shuffledQuestions[currentIdx];
        document.getElementById('overlay').style.display = 'none';
        document.getElementById('current-num').innerText = currentIdx + 1;
        document.getElementById('q-category').innerText = `‡∏´‡∏°‡∏ß‡∏î: ${qData.t} (‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• ${qData.r} ‡∏ø)`;
        document.getElementById('q-text').innerText = qData.q;
        
        const container = document.getElementById('options-container');
        container.innerHTML = '';
        qData.a.forEach((opt, i) => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(i);
            container.appendChild(btn);
        });
    }

    function checkAnswer(idx) {
        const qData = shuffledQuestions[currentIdx];
        const isCorrect = idx === qData.c;
        const overlay = document.getElementById('overlay');
        
        if(isCorrect) {
            totalMoney += qData.r;
            correctCount++;
            document.getElementById('status-icon').innerText = "‚úÖ";
            document.getElementById('status-title').innerText = "‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å!";
            document.getElementById('status-title').style.color = "var(--success)";
            document.getElementById('status-desc').innerText = `‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏£‡∏≤‡∏á‡∏ß‡∏±‡∏• ${qData.r} ‡∏ø ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤`;
            document.getElementById('explanation-area').style.display = 'none';
        } else {
            document.getElementById('status-icon').innerText = "‚ùå";
            document.getElementById('status-title').innerText = "‡∏û‡∏•‡∏≤‡∏î‡πÑ‡∏õ‡∏ô‡∏¥‡∏î!";
            document.getElementById('status-title').style.color = "var(--danger)";
            document.getElementById('status-desc').innerText = `‡πÄ‡∏â‡∏•‡∏¢‡∏Ñ‡∏∑‡∏≠: ${qData.a[qData.c]}`;
            document.getElementById('q-explanation').innerText = qData.msg;
            document.getElementById('explanation-area').style.display = 'block';
        }
        
        document.getElementById('balance').innerText = totalMoney;
        overlay.style.display = 'flex';
    }

    function nextQuestion() {
        currentIdx++;
        if(currentIdx < shuffledQuestions.length) {
            showQuestion();
        } else {
            finishGame();
        }
    }

    function finishGame() {
        document.getElementById('quiz-screen').style.display = 'none';
        document.getElementById('overlay').style.display = 'none';
        document.getElementById('result-screen').style.display = 'block';
        document.getElementById('final-money').innerText = totalMoney;
        document.getElementById('final-correct').innerText = correctCount;
        
        const msg = totalMoney > 1000 ? "‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠‡∏°‡∏´‡∏≤‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏µ‡∏ï‡∏±‡∏ß‡∏à‡∏£‡∏¥‡∏á!" : "‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏≠‡∏µ‡∏Å‡∏ô‡∏¥‡∏î ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏£‡∏ß‡∏¢‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏°‡πà‡πÑ‡∏Å‡∏•";
        document.getElementById('rank-msg').innerText = msg;
    }

    initGame();
</script>
</body>
</html>
